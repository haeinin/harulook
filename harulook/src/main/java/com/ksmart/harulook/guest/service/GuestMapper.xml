<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
 
<mapper namespace="com.ksmart.harulook.guest.service.GuestMapper">
     
    <resultMap type="com.ksmart.harulook.guest.service.GuestDto" id="guest">
		<result property="guestNo" column="guest_no"/>
		<result property="guestIp" column="guest_ip"/>
		<result property="guestDate" column="guest_date"/>
		<result property="guestLoc" column="guest_loc"/>
	</resultMap>
		
		<!-- 손님입력 no검색 -->
     	<select id="guestSelect" parameterType="java.util.Map" resultType="String">
			select guest_ip
			from guest
			where 
			guest_ip = #{guestIp} 
			and guest_date = date(NOW());
			;
    	</select>
			
		<!-- 손님입력 no검색 -->
     	<select id="guestSelectNo" resultType="String">
			select MAX(CAST(substring(guest_no, 7) AS DECIMAL))
			from guest
			;
    	</select>	
			
		<!-- 손님입력 -->
     	<insert id="guestinsert" parameterType="java.util.Map">
			INSERT INTO guest(
				guest_no
				, guest_ip
				, guest_date
				, guest_loc
				)
			VALUES (
				#{guestInsertNo}
				, #{guestIp}
				, date(NOW())
				, 'ddddasdfas'
				);
		</insert>
      
</mapper>


