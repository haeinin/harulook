<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.ksmart.harulook.board.BoardMapper">
	<resultMap type="com.ksmart.harulook.dto.BoardDto" id="board">
		<result property="snsBoardNo" column="sns_board_no"/>
		<result property="userId" column="user_id"/>
		<result property="snsBoardImg" column="sns_board_img"/>
		<result property="snsBoardContent" column="sns_board_content"/>
		<result property="snsBoardWeather" column="sns_board_weather"/>
		<result property="snsBoardTall" column="sns_board_tall"/>
		<result property="snsBoardSize" column="sns_board_size"/>
		<result property="snsBoardLoc" column="sns_board_loc"/>
		<result property="snsBoardDate" column="sns_board_date"/>
		<result property="snsBoardGender" column="sns_board_gender"/>
		<result property="snsBoardAge" column="sns_board_age"/>
	</resultMap>
	
	<!-- sns게시물 상세 보기 -->
	<select id="boardDetail" parameterType="String" resultMap="board">
		SELECT 
 			sns_board_no
 			,user_id
 			,sns_board_img
			,sns_board_content
			,sns_board_weather
			,sns_board_tall
			,sns_board_size
			,sns_board_loc
			,sns_board_date
			,sns_board_gender
			,sns_board_age
		From sns_board
		WHERE sns_board_no = #{snsBoardNo}
	</select>
	
	<!-- sns게시물 수 조회 -->
	<select id="boardCount" resultType="int">
        SELECT COUNT(*) FROM sns_board
    </select>
	
	<!-- sns게시물 목록 조회 -->
	<select id="boardList" parameterType="java.util.Map" resultMap="board">
		SELECT 
			sns_board_no
			,sns_board_img
			,sns_board_date
		FROM sns_board
        ORDER BY sns_board_date DESC 
        LIMIT #{beginRow}, #{pagePerRow}
	</select>

	<!-- sns게시물 등록 -->
	<insert id="boardInsert" parameterType="com.ksmart.harulook.dto.BoardDto">
		INSERT INTO sns_board(
			sns_board_no
			,user_id
			,sns_board_img
			,sns_board_content
			,sns_board_weather
			,sns_board_tall
	 		,sns_board_size
	 		,sns_board_loc
	 		,sns_board_date
	 		,sns_board_gender
	 		,sns_board_age
	 	)
	 	VALUES(
	 		#{snsBoardNo}
	 		,#{userId}
	 		,#{snsBoardImg}
	 		,#{snsBoardContent}
		 	,#{snsBoardWeather}
		 	,#{snsBoardTall}
		 	,#{snsBoardSize}
		 	,#{snsBoardLoc}
		 	,date(now())
		 	,#{snsBoardGender}
		 	,#{snsBoardAge}
	 	)
	</insert>
</mapper>