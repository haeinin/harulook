<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
 
<mapper namespace="com.ksmart.harulook.point.service.PointMapper">
     
    <resultMap type="com.ksmart.harulook.point.service.PointDto" id="Point">
		<result property="pointPolicyNo" column="point_policy_no"/>
		<result property="pointPolicyValue" column="point_policy_value"/>
		<result property="pointPolicyReason" column="point_policy_reason"/>
		<result property="pointNo" column="point_no"/>
		<result property="userId" column="user_id"/>
		<result property="pointDate" column="point_date"/>
	</resultMap>
	
	<!-- 포인트 사용 내역 -->
   	<select id="pointUse" parameterType="java.util.Map" resultMap="Point">
		select point.point_no
			, point.point_date
			, point.point_policy_no
			, point_policy.point_policy_reason
			, point_policy.point_policy_value
		from point
		join point_policy
		on point.point_policy_no = point_policy.point_policy_no
		where point.user_id = #{userId} 
		and point_policy.point_policy_value &lt; 0 
		order by point.point_date desc
		;
	</select>
	
	<!-- 포인트 취득 내역 -->
   	<select id="pointGet" parameterType="java.util.Map" resultMap="Point">
		select point.point_no
			, point.point_date
			, point.point_policy_no
			, point_policy.point_policy_reason
			, point_policy.point_policy_value
		from point
		join point_policy
		on point.point_policy_no = point_policy.point_policy_no
		where point.user_id = #{userId} 
		and point_policy.point_policy_value > 0 
		order by point.point_date desc
		;
	</select>
	
	<!-- 포인트 쿠폰 정책 -->
   	<select id="pointUsePolicy" parameterType="java.util.Map" resultMap="Point">
		select point_policy_no
			, point_policy_value
			, point_policy_reason
		from point_policy
		Where point_policy_value &lt; 0 
		order by point_policy_value desc 
		;
	</select>	
	
	<!-- 포인트 정책 리스트 -->
   	<select id="pointPolicy" parameterType="java.util.Map" resultMap="Point">
		select point_policy_no
			, point_policy_value
			, point_policy_reason
		from point_policy
		Where point_policy_value > 0
		order by point_policy_value desc 
		;
	</select>	
	
</mapper>


